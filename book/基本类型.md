% 基本类型

Rust支持若干基本类型，这些类型是内置于语言中的。

# 布尔型（bool）

和C++类似，Rust的`bool`型变量有两种值：`true`和`false`:

```rust
let x = true;

let y: bool = false;
```

布尔型变量一般被用在[条件判断语句中][if]。

[if]: 条件判断.md

你可在[标准库文档中][bool]找到更多关于布尔类型的描述。

[bool]: https://doc.rust-lang.org/std/primitive.bool.html

# 字符（char）

在Rust中单个字符由单引号包围，代表一个unicode标量值：

```rust
let x = 'x';
let two_hearts = '💕';
```

这意味着Rust中单个字符不是由一个字节表示的，而是四个字节。你可以在[标准库文档][char]
找到更多关于字符的说明.

[char]: https://doc.rust-lang.org/std/primitive.char.html

# 数值型

Rust支持的数值类型有：有符号和无符号，固定宽度和不定宽度型，浮点和整数型。

这些数值类型均由两部分构成：类型和宽度。例如`u16`表示16位的无符号整数类型。

数值字面量的默认类型如下：

```rust
let x = 42; // x has type i32

let y = 1.0; // y has type f64
```

以下列出了所有数值类型：

* [i8](https://doc.rust-lang.org/std/primitive.i8.html)
* [i16](https://doc.rust-lang.org/std/primitive.i16.html)
* [i32](https://doc.rust-lang.org/std/primitive.i32.html)
* [i64](https://doc.rust-lang.org/std/primitive.i64.html)
* [u8](https://doc.rust-lang.org/std/primitive.u8.html)
* [u16](https://doc.rust-lang.org/std/primitive.u16.html)
* [u32](https://doc.rust-lang.org/std/primitive.u32.html)
* [u64](https://doc.rust-lang.org/std/primitive.u64.html)
* [isize](https://doc.rust-lang.org/std/primitive.isize.html)
* [usize](https://doc.rust-lang.org/std/primitive.usize.html)
* [f32](https://doc.rust-lang.org/std/primitive.f32.html)
* [f64](https://doc.rust-lang.org/std/primitive.f64.html)

下面我们描述各种数值类型：

## 有符号和无符号

整数类型被分为有符号和无符号两类，有符号数使用补码表示数字，无符号则维持原样。

无符号和有符号类型分别使用`u`和 `i`表示。例如`u8`表示8位无符号数，`i8`表示8位
有符号数。

## 固定宽度类型

固定宽度类型所占用的字节数在任何平台上都是固定不变的，目前支持的宽度值有`8`、`16`、
`32`和`64`位。

## 不定宽度类型

Rust还提供了一些占用字节数依赖于特定平台的类型，我们统一称之为不定宽度类型。不定
宽度类型一般用于表示符合数据类型包含元素的数量，因此Rust使用`size`对其进行表示。
不定宽度类型同样被分为有符号和无符号两类：`isize`和`usize`。

## 浮点类型

Rust支持两种浮点类型：`f32`和`f64`，它们分别对应IEEE-754单精度和双精度浮点数的
定义。

# 数组

和任何编程语言一样，Rust同样支持数组——可用于保存相同类型且固定数目的元素序列。
注意数组同样默认是不可变的。

```rust
let a = [1, 2, 3]; // a: [i32; 3]
let mut m = [1, 2, 3]; // m: [i32; 3]
```

数组类型的形式为`[T; N]`，其中`T`代表元素类型，`N`代表数组长度。

Rust支持初始化数组的简化语法，可将数组的所有元素初始化为相同的值：

```rust
let a = [0; 20]; // a: [i32; 20]
```

数组的长度可通过`len()`方法得到：

```rust
let a = [1, 2, 3];

println!("a has {} elements", a.len());
```

和C/C++、Java类似，Rust同样可使用下标方式访问数组的元素（从0开始）：

```rust
let names = ["Graydon", "Brian", "Niko"]; // names: [&str; 3]

println!("The second name is: {}", names[1]);
```

Rust程序在运行时会检查数组的访问是否越界，如果越界会导致程序崩溃。越界访问数组是
系统编程语言实践中非常常见的bug。

你可在[标准库文档][array]中查阅更多与数组相关的内容。

[array]: https://doc.rust-lang.org/std/primitive.array.html

# 切片（slice）

切片表示对数组部分数据的引用，使用切片可以方便、安全的对数组的一部分进行访问而无
需进行数据拷贝。切片同样有长度，且可能是可变或不可变的。

切片实际上是对数组起始位置和长度的引用。

## 切片语法

切片可使用`&`和`[]`来创建。`&`表示切片和[引用][reference]类似，`[]`则用于界定
切片访问的数组范围。

```rust
let a = [0, 1, 2, 3, 4];
let complete = &a[..]; // A slice containing all of the elements in a
let middle = &a[1..4]; // A slice of a: only the elements 1, 2, and 3
```

切片的类型是`&[T]`，我们将在后面的[泛型章节][generics]中详细说明`T`。

[generics]: 泛型.md

你可在[标准库文档][slice]中查阅更多关于切片的说明。

[slice]: https://doc.rust-lang.org/std/primitive.slice.html

# 字符串（str）

Rust的`str`类型是用于表示字符串的基本类型。和[unsized type][dst]一样，这个类型
本身不是特别有用，一般都是结合引用来使用的，如`&str`。

[dst]: unsized-types.html
[strings]: 字符串.md
[references]: 引用和借用.md

关于`str`的更多资料同样可在[标准库文档][str]中获得。

[str]: https://doc.rust-lang.org/std/primitive.str.html

# 元组

元组是大小固定的一组序列：

```rust
let x = (1, "hello");
```

以上代码中的一对圆括号和逗号构成了一个两个元素的元组。下面是添加了类型声明的版本：

```rust
let x: (i32, &str) = (1, "hello");
```

如上所述，元组的类型表示和元组本身很类似，只不过圆括号中填写的是类型而不是值。此
外元组所包含元素的类型可以是不同的，这点与数组不同。

一个元组可以被赋值给另一个元组，前提是它们的类型表示相同。

```rust
let mut x = (1, 2); // x: (i32, i32)
let y = (2, 3); // y: (i32, i32)

x = y;
```

还记得我们在[变量绑定][let]章节中提到过`let`的功能不止是创建新变量吗？现在正菜
来了：我们可通过模式匹配和let关键字捕获元组中包含的元素。

```rust
let (x, y, z) = (1, 2, 3);

println!("x is {}", x);
```

以上代码的`let`语句等号左边的部分就是一个模式，在该模式与等号右边的内容相匹配的
情况下，我们相当于同时创建了多个变量，这些变量各自对应于模式中匹配到的值。

[let]: 变量绑定.md

这种写法非常的强大，我们在后面会见到更多的例子。

只有一个元素的元组和用括号括起来的单个元素可用逗号做区分：

```rust
(0,); // single-element tuple
(0); // zero in parentheses
```

## 元组下标访问

元组支持下标语法访问元素：

```rust
let tuple = (1, 2, 3);

let x = tuple.0;
let y = tuple.1;
let z = tuple.2;

println!("x is {}", x);
```

和数组下标类似，元组的下标也从0开始，与数组下标不同的是元组下标使用`.`而不是`[]`。

你可在[标准库文档][tuple]中查阅到更多元组相关的资料。

[tuple]: https://doc.rust-lang.org/std/primitive.tuple.html

# 函数

函数同样也有类型，其写法如下：

```rust
fn foo(x: i32) -> i32 { x }

let x: fn(i32) -> i32 = foo;
```

在以上代码中，变量`x`即为一个函数指针，它指向的函数接受并返回一个`i32`类型的值。
